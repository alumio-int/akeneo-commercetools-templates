{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"scheduler-entry","identifier":"akeneo-fetch-families-and-attributes","name":"Akeneo - Fetch - Families and Attributes","object":{"parameters":{"job":[{"prototype":"run-incoming","parameters":{"incoming":"akeneo-fetch-families"}}],"handlers":[],"priority":2,"expression":"*/15 * * * *"}},"description":"This will fetch Families from Akeneo then further fetch the data of attribute and its options inside the transformer.","owner":null,"disabled":true}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"incoming-configuration","identifier":"akeneo-fetch-families","name":"Akeneo - Fetch - Families and Attributes","object":{"parameters":{"entityType":"base-family","subscriber":{"prototype":"http-subscriber","parameters":{"client":"akeneo-http-client","request":{"uri":"/api/rest/v1/families","payload":[],"plugins":[],"payloadType":"data","authentications":[]},"pagination":{"prototype":"next","parameters":{"pattern":"_links.next","pageLimit":1000}},"deserializer":{"prototype":"json","parameters":{"pattern":"_embedded.items","readMethod":"wholeFile","encodeInput":false}},"requestListeners":[]}},"transformers":["akeneo-fetch-and-convert-family-attributes-into-alumio-base-attributes","akeneo-filter-previous-family"]}},"description":"This Incoming will fetch Families from Akeneo then further fetch the data of attribute and its options inside the transformer.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"http-client","identifier":"akeneo-http-client","name":"Akeneo - HTTP Client","object":{"prototype":"akeneo-http-client-v2","parameters":{"key":"","baseUri":"${AKENEO_BASE_URL}","advanced":[],"clientId":"${AKENEO_CLIENT_ID}","password":"${AKENEO_PASSWORD}","username":"${AKENEO_USERNAME}","clientSecret":"${AKENEO_CLIENT_SECRET}","enableLogging":true,"loggerFormatter":"full"}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"entity","identifier":"base-family","name":"Base - Family","object":{"parameters":{"schema":[],"identifierPath":["code"]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-fetch-and-convert-family-attributes-into-alumio-base-attributes","name":"Akeneo - Fetch and convert - Family attributes into Alumio Base attributes","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"attributes.*","conditions":[],"replacement":"attributes.$1.code"}},{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["akeneo-fetch-and-update-storage-family-variants-axes"]}}]}},"akeneo-prepare-convert-labels-to-localizations","akeneo-convert-family-to-alumio-base",{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"attributes"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["akeneo-fetch-attribute-by-code","akeneo-prepare-convert-labels-to-localizations","akeneo-check-and-fetch-attribute-options","akeneo-convert-attribute-to-alumio-base-attribute","akeneo-map-type-code-to-alumio-base-code","akeneo-check-axes-is-super"]}}]}}]}},"description":"This transformer will fetch the attributes data inside a family then converting them into Alumio Base attributes.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-fetch-and-update-storage-family-variants-axes","name":"Akeneo - Fetch and update storage - Family Variants - Axes","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"limit","value":100,"mappers":[]},{"key":"endpoint","value":"/api/rest/v1/families/&{code}/variants","mappers":[]}]}},{"meta":[],"prototype":"merger","parameters":{"template":{"data":"&{_embedded.items || `[]`}","total":"&{items_count || `0`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"akeneo-http-client","request":{"uri":"&{endpoint}","payload":{"limit":"&{limit}","with_count":"true"},"plugins":[],"payloadType":"data","authentications":[]}}}}}]}},{"meta":{"name":"Build Pagination"},"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"total_page","value":["&{total}","&{limit}"],"mappers":[{"prototype":"operator","parameters":{"operator":"division"}},{"prototype":"cast-int","parameters":[]}]},{"key":"newData","value":"&{total_page}","mappers":[{"prototype":"cast-int","parameters":[]}]}]}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-fill","parameters":{"start":0,"length":"&{@}"}}],"accessor":{"prototype":"key","parameters":{"keys":["newData"]}}}},{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"key","parameters":{"keys":[],"root":"newData"}},"destination":{"prototype":"structure","parameters":{"key":"index","keys":[],"root":"newData","value":"value"}},"stripEnclosures":true}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"newData"}}}},{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"limit":"&{limit}","endpoint":"&{endpoint}"},"childrenPattern":"newData.*"}}]}}]}},{"meta":{"name":"Pagination - Execute next page"},"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"newData.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"cast-int","parameters":[]},{"prototype":"prepared-operator","parameters":{"left":null,"right":[2],"operator":"addition"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"index"}}}},{"meta":[],"prototype":"merger","parameters":{"template":{"data":"&{_embedded.items || `[]`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"akeneo-http-client","request":{"uri":"&{endpoint}","payload":{"page":"&{index}","limit":"&{limit}","with_count":"true"},"plugins":[{"prototype":"logger","parameters":{"formatter":"simple"}}],"payloadType":"data","authentications":[]}}}}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["limit","index","total"]}},"conditions":[]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"newArray","value":["&{notFound || `[]`}","&{notFound || `[]`}"],"mappers":[]}]}},{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"newData.*.data.*","conditions":[],"replacement":"newArray.$1.$2"}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"newArray"}}}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"results","value":["&{data}","&{newArray}"],"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}]}]}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["data","newArray"]}},"conditions":[]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"results.*.variant_attribute_sets.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"isSuper","value":true,"mappers":[]}]}},{"meta":[],"prototype":"storage-save-entity-in-storage","parameters":{"source":"isSuper","storage":"akeneo-family-variants-axes","storageKey":"&{axes[0]}"}}]}}]}},"description":"This transformer is a custom pagination HTTP call to get family variants.\n\nIt will then be save the family axes in the storage Akeneo - Family Variants - Axes.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"akeneo-family-variants-axes","name":"Akeneo - Family Variants - Axes","object":{"parameters":{"path":"akeneo-family-variants-axes-01JVVJ3WXBKJ9P33CCR966Q68Z","logger":{"parameters":{"actions":[]}}}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-prepare-convert-labels-to-localizations","name":"Akeneo - Prepare convert - Labels - To localizations","object":{"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"key","parameters":{"keys":[],"root":"labels"}},"destination":{"prototype":"structure","parameters":{"key":"localeCode","keys":[],"root":"localizations","value":"translation"}},"stripEnclosures":true}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"labels"}]}}]}},"description":"Change labels from Akeneo into Alumio Base localizations","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-convert-family-to-alumio-base","name":"Akeneo - Convert - Family to Alumio Base","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[]}},"conditions":[{"prototype":"not-one-of","parameters":{"value":["code","attributes","localizations"]}}]}}]}},"description":"This transformer will convert the family structure into Alumio Base.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-fetch-attribute-by-code","name":"Akeneo - Fetch - Attribute by code","object":{"prototype":"data","parameters":{"filters":[],"transformers":[{"prototype":"http-transformer","parameters":{"client":"akeneo-http-client","request":{"uri":"/api/rest/v1/attributes/&{code}","payload":[],"plugins":[],"payloadType":"data","authentications":[]}}}]}},"description":"Getting attribute data from Akeneo using code.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-check-and-fetch-attribute-options","name":"Akeneo  - Check and fetch - Attribute options","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"type"}},"conditions":[{"prototype":"one-of","parameters":{"value":["pim_catalog_simpleselect","pim_catalog_multiselect"]}}]}}],"elseCases":[{"filter":{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"type"}},"conditions":[{"prototype":"one-of","parameters":{"value":["akeneo_reference_entity","akeneo_reference_entity_collection"]}}]}},"transformer":{"prototype":"list-transformer-wrapper","parameters":{"transformers":["akeneo-fetch-and-convert-attribute-options-from-entity-records-to-alumio-base-attribute-options"]}}}],"transformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["akeneo-fetch-and-convert-attribute-options-to-alumio-base-attribute-options"]}}],"elseTransformers":[]}}]}},"description":"Fetch the attribute options when the attribute is simple select or multiselect.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-fetch-and-convert-attribute-options-to-alumio-base-attribute-options","name":"Akeneo - Fetch and convert - Attribute Options - To Alumio Base Attribute Options","object":{"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"limit","value":100,"mappers":[]},{"key":"endpoint","value":"/api/rest/v1/attributes/&{code}/options","mappers":[]}]}},{"meta":[],"prototype":"merger","parameters":{"template":{"data":"&{_embedded.items || `[]`}","total":"&{items_count || `0`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"akeneo-http-client","request":{"uri":"&{endpoint}","payload":{"limit":"&{limit}","with_count":"true"},"plugins":[],"payloadType":"data","authentications":[]}}}}}]}},{"meta":{"name":"Build Pagination"},"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"total_page","value":["&{total}","&{limit}"],"mappers":[{"prototype":"operator","parameters":{"operator":"division"}},{"prototype":"cast-int","parameters":[]}]},{"key":"newData","value":"&{total_page}","mappers":[{"prototype":"cast-int","parameters":[]}]}]}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-fill","parameters":{"start":0,"length":"&{@}"}}],"accessor":{"prototype":"key","parameters":{"keys":["newData"]}}}},{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"key","parameters":{"keys":[],"root":"newData"}},"destination":{"prototype":"structure","parameters":{"key":"index","keys":[],"root":"newData","value":"value"}},"stripEnclosures":true}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"newData"}}}},{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"limit":"&{limit}","endpoint":"&{endpoint}"},"childrenPattern":"newData.*"}}]}}]}},{"meta":{"name":"Pagination - Execute next page"},"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"newData.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"cast-int","parameters":[]},{"prototype":"prepared-operator","parameters":{"left":null,"right":[2],"operator":"addition"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"index"}}}},{"meta":[],"prototype":"merger","parameters":{"template":{"data":"&{_embedded.items || `[]`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"akeneo-http-client","request":{"uri":"&{endpoint}","payload":{"page":"&{index}","limit":"&{limit}","with_count":"true"},"plugins":[{"prototype":"logger","parameters":{"formatter":"simple"}}],"payloadType":"data","authentications":[]}}}}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["limit","index","total"]}},"conditions":[]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"newArray","value":["&{notFound || `[]`}","&{notFound || `[]`}"],"mappers":[]}]}},{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"newData.*.data.*","conditions":[],"replacement":"newArray.$1.$2"}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"newArray"}}}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"options","value":["&{data}","&{newArray}"],"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}]}]}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["data","newArray"]}},"conditions":[]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"options"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["akeneo-prepare-convert-labels-to-localizations","akeneo-convert-attribute-option-alumio-base-attribute-option"]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-convert-attribute-option-alumio-base-attribute-option","name":"Akeneo - Convert - Attribute Option - Alumio Base Attribute Option","object":{"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[]}},"conditions":[{"prototype":"not-one-of","parameters":{"value":["identifier","code","localizations"]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-fetch-and-convert-attribute-options-from-entity-records-to-alumio-base-attribute-options","name":"Akeneo - Fetch and convert - Attribute Options - From entity records to Alumio Base Attribute Options","object":{"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"limit","value":100,"mappers":[]},{"key":"endpoint","value":"/api/rest/v1/reference-entities/&{reference_data_name}/records","mappers":[]}]}},{"meta":[],"prototype":"merger","parameters":{"template":{"data":"&{_embedded.items || `[]`}","total":"&{items_count || `0`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"akeneo-http-client","request":{"uri":"&{endpoint}","payload":{"limit":"&{limit}","with_count":"true"},"plugins":[],"payloadType":"data","authentications":[]}}}}}]}},{"meta":{"name":"Build Pagination"},"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"total_page","value":["&{total}","&{limit}"],"mappers":[{"prototype":"operator","parameters":{"operator":"division"}},{"prototype":"cast-int","parameters":[]}]},{"key":"newData","value":"&{total_page}","mappers":[{"prototype":"cast-int","parameters":[]}]}]}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-fill","parameters":{"start":0,"length":"&{@}"}}],"accessor":{"prototype":"key","parameters":{"keys":["newData"]}}}},{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"key","parameters":{"keys":[],"root":"newData"}},"destination":{"prototype":"structure","parameters":{"key":"index","keys":[],"root":"newData","value":"value"}},"stripEnclosures":true}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"newData"}}}},{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"limit":"&{limit}","endpoint":"&{endpoint}"},"childrenPattern":"newData.*"}}]}}]}},{"meta":{"name":"Pagination - Execute next page"},"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"newData.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"cast-int","parameters":[]},{"prototype":"prepared-operator","parameters":{"left":null,"right":[2],"operator":"addition"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"index"}}}},{"meta":[],"prototype":"merger","parameters":{"template":{"data":"&{_embedded.items || `[]`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"akeneo-http-client","request":{"uri":"&{endpoint}","payload":{"page":"&{index}","limit":"&{limit}","with_count":"true"},"plugins":[{"prototype":"logger","parameters":{"formatter":"simple"}}],"payloadType":"data","authentications":[]}}}}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["limit","index","total"]}},"conditions":[]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"newArray","value":["&{notFound || `[]`}","&{notFound || `[]`}"],"mappers":[]}]}},{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"newData.*.data.*","conditions":[],"replacement":"newArray.$1.$2"}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"newArray"}}}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"options","value":["&{data}","&{newArray}"],"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}]}]}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["data","newArray"]}},"conditions":[]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"options"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["akeneo-convert-attribute-option-from-akeneo-entity-records-to-alumio-base-attribute-option"]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-convert-attribute-option-from-akeneo-entity-records-to-alumio-base-attribute-option","name":"Akeneo - Convert - Attribute Option - From Akeneo Entity Records to Alumio Base Attribute Option","object":{"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"values.label.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"locale","conditions":[],"replacement":"localeCode"}},{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"data","conditions":[],"replacement":"translation"}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"channel"}]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"values.label.*","conditions":[],"replacement":"localizations.$1"}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[]}},"conditions":[{"prototype":"not-one-of","parameters":{"value":["code","localizations"]}}]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-convert-attribute-to-alumio-base-attribute","name":"Akeneo - Convert - Attribute - To Alumio Base Attribute","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"type","conditions":[],"replacement":"typeCode"}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[]}},"conditions":[{"prototype":"not-one-of","parameters":{"value":["identifier","isSuper","code","typeCode","options","localizations","localizable","is_mandatory"]}}]}}]}}]}},"description":"This transformer will convert the attribute structure into Alumio Base.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-map-type-code-to-alumio-base-code","name":"Akeneo - Map - Type code - To Alumio Base code","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"string-replace","parameters":{"search":"pim_catalog_"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"typeCode"}}}}]}},"description":"This transformer will convert the attribute code value into Alumio Base.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-check-axes-is-super","name":"Akeneo - Check - Axes - Is Super","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"isSuper","value":false,"mappers":[]}]}},{"meta":[],"prototype":"storage-get-entity-from-storage","parameters":{"storage":"akeneo-family-variants-axes","storageKey":"&{code}","destination":"isSuper"}}]}},"description":"This transformer checks the super attribute using storage Akeneo - Family Variants - Axes that created earlier at \"Akeneo - Fetch and update storage - Family Variants - Axes\".","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-filter-previous-family","name":"Akeneo - Filter previous - Family","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"type-setter","parameters":{"entityType":"base-family"}},{"meta":[],"prototype":"storage-filter-stored-entity","parameters":{"storage":"akeneo-filter-previously-family","addEntityToStorage":true}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"akeneo-filter-previously-family","name":"Akeneo - Filter previous - Family ","object":{"parameters":{"path":"akeneo-filter-previously-family-01JVW3ENKBQFZ5CJKNPKTHADMH","logger":{"parameters":{"actions":[]}}}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"scheduler-entry","identifier":"commercetools-send-product-types","name":"CommerceTools - Send - Product types","object":{"parameters":{"job":[{"prototype":"run-incoming","parameters":{"incoming":"commercetools-fetch-product-types-and-attributes"}},{"prototype":"run-outgoing","parameters":{"route":"synchronize-commercetools-product-types-from-akeneo-families-and-attributes","numTasks":100}}],"handlers":[],"priority":2,"expression":"*/15 * * * *"}},"description":"This scheduler will fetch the data from the CommerceTools system product types.\n\nAnd then the task that was created through Incoming **\"Akeneo - Fetch - Families and Attributes\"** will then processed further by the Route **\"Akeneo - Fetch - Families and Attributes\"** and will be send using this Outgoing.","owner":null,"disabled":true}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"incoming-configuration","identifier":"commercetools-fetch-product-types-and-attributes","name":"Commercetools - Fetch - Product types & Attributes","object":{"parameters":{"subscriber":{"prototype":"http-subscriber","parameters":{"client":"commercetools-http-client","request":{"uri":"/product-types","payload":{"limit":500,"offset":0},"plugins":[],"payloadType":"data","authentications":[]},"pagination":{"prototype":"query-page-parameter","parameters":{"mode":"offset","pageLimit":10000,"parameter":"offset","expectedCount":500}},"transformer":{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":[]}},"deserializer":{"prototype":"json","parameters":{"pattern":"results","readMethod":"wholeFile","encodeInput":false}}}},"transformers":["commercetools-update-storage-product-type","commercetools-fetch-product-types-and-attributes-save-to-storage"]}},"description":"Fetch Product Types and the attributes from Commercetools to Alumio storage","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"http-client","identifier":"commercetools-http-client","name":"Commercetools - HTTP Client","object":{"prototype":"commercetools-http-client","parameters":{"key":"","scope":"manage_project:le-alumio","authUrl":"https://auth.europe-west1.gcp.commercetools.com","baseUrl":"https://api.europe-west1.gcp.commercetools.com","project":"${COMMERCETOOLS_PROJECT_KEY}","password":"${COMMERCETOOLS_SECRET}","username":"${COMMERCETOOLS_CLIENT_ID}","enableLogging":true,"loggerFormatter":"full"}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"commercetools-update-storage-product-type","name":"CommerceTools - Update Storage - Product type","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"storage-save-entity-in-storage","parameters":{"source":"id","storage":"commercetools-product-type-akeneo-family-code-to-id","storageKey":"&{key}"}},{"meta":[],"prototype":"storage-save-entity-in-storage","parameters":{"storage":"commercetools-product-type-full-data","storageKey":"&{id}"}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"commercetools-product-type-akeneo-family-code-to-id","name":"CommerceTools - Product Type - Akeneo Family code to id","object":{"parameters":{"path":"commercetools-product-type-akeneo-family-code-to-id-01JW909YC5EPHFSVGENK3QZHH5","logger":{"parameters":{"actions":[]}}}},"description":"Mapping Akeneo Family into CommerceTools Product Type","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"commercetools-product-type-full-data","name":"CommerceTools - Product Type - Full data","object":{"parameters":{"path":"commercetools-product-type-full-data-01JW90J2C20T5MXS7032R5C6RS","logger":{"parameters":{"actions":[]}}}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"commercetools-fetch-product-types-and-attributes-save-to-storage","name":"Commercetools - Fetch - Product Types & Attributes - Save to Storage","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"productTypeKey":"&{key}"},"childrenPattern":"attributes.*"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"attributes.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"storage-save-entity-in-storage","parameters":{"source":"type.name","storage":"commercetools-product-types-attributes","storageKey":"&{productTypeKey}-&{name}"}}]}}]}},"description":"Save the Product Type attribute type into storage","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"commercetools-product-types-attributes","name":"Commercetools - Product Types Attributes","object":{"parameters":{"path":"commercetools-product-types-attributes-01JWTE14H51R4AP2D7MY2DH81T","logger":{"parameters":{"actions":[]}}}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"route-configuration","identifier":"synchronize-commercetools-product-types-from-akeneo-families-and-attributes","name":"Synchronize CommerceTools Product Types - From Akeneo Families and Attributes","object":{"parameters":{"incoming":"akeneo-fetch-families","outgoing":"commercetools-send-product-types","realtime":false,"transformers":[],"waitingStatus":false,"parallelExecution":[]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"outgoing-configuration","identifier":"commercetools-send-product-types","name":"CommerceTools - Send - Product types","object":{"parameters":{"publisher":{"prototype":"no-action-publisher","parameters":[]},"transformers":["alumio-base-convert-values-family-attributes-options-localization-localecode-into-commercetools-localecode","commercetools-convert-product-types-from-alumio-base-family","commercetools-check-and-send-product-type"]}},"description":"The task that was created through Incoming **\"Akeneo - Fetch - Families and Attributes\"** will then processed further by the Route **\"Akeneo - Fetch - Families and Attributes\"** and will be send using this Outgoing.\n\nThis Outgoing will transform the Alumio Base Families and Attributes into CommerceTools product types and check to create or update product types with the data from this outgoing previous iteration.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"alumio-base-convert-values-family-attributes-options-localization-localecode-into-commercetools-localecode","name":"Alumio Base - Convert Values - Family - Attributes - Options - Localization localeCode into CommerceTools localeCode","object":{"meta":[],"prototype":"chain","parameters":{"transformers":["alumio-base-convert-value-localization-localecode-into-commercetools-localecode",{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"attributes"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["alumio-base-convert-value-localization-localecode-into-commercetools-localecode"]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"attributes.*.options.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["alumio-base-convert-value-localization-localecode-into-commercetools-localecode"]}}]}}]}},"description":"Convert all localCode into CommerceTools inside the Alumio Base Family and Attributes.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"alumio-base-convert-value-localization-localecode-into-commercetools-localecode","name":"Alumio Base - Convert value - Localization localeCode into CommerceTools localeCode","object":{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"localizations"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"string-upper","parameters":[]},{"prototype":"string-replace","parameters":{"search":"_","replace":"-"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"localeCode"}}}}]}},"description":"This transformer will convert the localCode value inside localizations into localCode that Commercetools use.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"commercetools-convert-product-types-from-alumio-base-family","name":"CommerceTools - Convert - Product types from Alumio base Family","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"code","conditions":[],"replacement":"key"}},{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"key","conditions":[],"replacement":"name"}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"string-replace","parameters":{"search":"_","replace":" "}},{"prototype":"string-upper-first","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"name"}}}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"description","value":"&{(localizations[?localeCode=='EN-US'].translation | [0]) || (localizations[?localeCode=='EN-GB'].translation | [0]) || (localizations[].translation | [0])}","mappers":[]}]}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"localizations"}]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"attributes"}},"nodeFilters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"typeCode"}},"conditions":[{"prototype":"not-one-of","parameters":{"value":["image","file","asset_collection","table"]}}]}}],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["commercetools-convert-attributes-from-alumio-base"]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"attributes"}}}}]}}]}},"description":"Convert into CommerceTools product type from Alumio base Family and Attributes.\n\nIt will call other transformer to convert the Attributes.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"commercetools-convert-attributes-from-alumio-base","name":"CommerceTools - Convert - Attributes from Alumio Base","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"code","conditions":[],"replacement":"name"}},{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"typeCode","conditions":[],"replacement":"type.name"}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"dictionary-map","parameters":{"map":[["identifier","text"],["textarea","text"],["simpleselect","lenum"],["multiselect","set"],["metric","number"],["price_collection","text"],["asset_collection","text"],["image","text"],["file","text"],["asset_collection","text"],["table","text"],["reference_data_simpleselect","text"],["akeneo_reference_entity_collection","set"],["akeneo_reference_entity","lenum"]],"comparator":"equals"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"type.name"}}}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"and-condition","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"type.name"}},"conditions":[{"prototype":"not-one-of","parameters":{"value":["lenum","set"]}}]}},{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"localizable"}},"conditions":[{"prototype":"equals","parameters":{"value":true}}]}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"type.name","value":"ltext","mappers":[]}]}}],"elseTransformers":[]}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"localizable"}]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"isSuper"}},"conditions":[{"prototype":"equals","parameters":{"value":true}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"attributeConstraint","value":"Unique","mappers":[]}]}}],"elseTransformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"attributeConstraint","value":"None","mappers":[]}]}}]}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"isSuper"}]}},{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"is_mandatory","conditions":[],"replacement":"isRequired"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"localizations"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"label.&{localeCode}","value":"&{translation}","mappers":[]}]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"localizations.*.label","conditions":[],"replacement":"label.$1"}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"label"}}}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"localizations"}]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"options"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["commercetools-convert-lenum-from-alumio-base"]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"type.name"}},"conditions":[{"prototype":"equals","parameters":{"value":"lenum"}}]}}],"elseCases":[{"filter":{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"type.name"}},"conditions":[{"prototype":"equals","parameters":{"value":"set"}}]}},"transformer":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"type","value":{"name":"&{type.name}","elementType":{"name":"lenum","values":"&{options}"}},"mappers":[]}]}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"options"}]}}]}}}],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"options","conditions":[],"replacement":"type.values"}}],"elseTransformers":[]}}]}}]}},"description":"Convert into CommerceTools Attributes from Alumio base Attributes.\n\nIt will call other transformer to convert the Attributes options if exists.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"commercetools-convert-lenum-from-alumio-base","name":"CommerceTools - Convert - Lenum from Alumio Base","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"code","conditions":[],"replacement":"key"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"localizations"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"label.&{localeCode}","value":"&{translation}","mappers":[]}]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"localizations.*.label","conditions":[],"replacement":"label.$1"}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"label"}}}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"localizations"}]}}]}}]}},"description":"Convert Alumio base option into lenum value","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"commercetools-check-and-send-product-type","name":"CommerceTools - Check and send - Product type","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"storage-get-entity-from-storage","parameters":{"storage":"commercetools-product-type-akeneo-family-code-to-id","storageKey":"&{key}","destination":"id"}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-not-exists-condition","parameters":{"path":"id"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"http-transformer","parameters":{"client":"commercetools-http-client","request":{"uri":"/product-types","method":"POST","payload":"&{@}","plugins":[],"payloadType":"data","authentications":[]}}},{"meta":[],"prototype":"storage-save-entity-in-storage","parameters":{"source":"id","storage":"commercetools-product-type-akeneo-family-code-to-id","storageKey":"&{key}"}},{"meta":[],"prototype":"storage-save-entity-in-storage","parameters":{"storage":"commercetools-product-type-full-data","storageKey":"&{id}"}}],"elseTransformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"actions","value":[],"mappers":[]}]}},{"meta":[],"prototype":"storage-get-entity-from-storage","parameters":{"storage":"commercetools-product-type-full-data","storageKey":"&{id}","destination":"old"}},{"prototype":"conditional","parameters":{"filters":[{"prototype":"and-condition","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"old"}}}}]}},{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"old"}},"conditions":[{"prototype":"not-equals","parameters":{"value":[]}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["commercetools-prepare-update-producttype-check-name","commercetools-prepare-update-producttype-check-description","commercetools-prepare-update-product-type-check-attributes"]}}],"elseTransformers":[]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"actions"}},"conditions":[{"prototype":"not-equals","parameters":{"value":[]}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"http-transformer","parameters":{"client":"commercetools-http-client","request":{"uri":"/product-types/&{id}","method":"POST","payload":{"actions":"&{actions}","version":"&{old.version}"},"plugins":[],"payloadType":"data","authentications":[]}}},{"meta":[],"prototype":"storage-save-entity-in-storage","parameters":{"storage":"commercetools-product-type-full-data","storageKey":"&{id}"}}],"elseTransformers":[]}}]}}]}},"description":"Check and send they payload for Product Type","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"commercetools-prepare-update-producttype-check-name","name":"CommerceTools - Prepare Update - Product type - Check name","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"check","value":"&{name == old.name}","mappers":[]}]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"check"}},"conditions":[{"prototype":"equals","parameters":{"value":false}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"temp","value":[{"name":"&{name}","action":"changeName"}],"mappers":[]}]}},{"meta":[],"prototype":"operator","parameters":{"left":"actions","right":"temp","operator":"array-merge"}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"temp"}]}}],"elseTransformers":[]}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"check"}]}}]}},"description":"Check the ProductType for name change and add to actions.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"commercetools-prepare-update-producttype-check-description","name":"CommerceTools - Prepare Update - Product type - Check description","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"check","value":"&{description == old.description}","mappers":[]}]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"check"}},"conditions":[{"prototype":"equals","parameters":{"value":false}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"temp","value":[{"action":"changeDescription","description":"&{description}"}],"mappers":[]}]}},{"meta":[],"prototype":"operator","parameters":{"left":"actions","right":"temp","operator":"array-merge"}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"temp"}]}}],"elseTransformers":[]}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"check"}]}}]}},"description":"Check the ProductType for description change and add to actions.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"commercetools-prepare-update-product-type-check-attributes","name":"CommerceTools - Prepare Update - Product type - Check attributes","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"attributes","conditions":[],"replacement":"curattributes"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"attributes"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"pattern","parameters":{"keys":[]}},"destination":{"prototype":"key","parameters":{"keys":[],"root":"attribute"}},"stripEnclosures":true}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"oldattributes":"&{old.attributes}"},"childrenPattern":"attributes.*"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"attributes"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["commercetools-prepare-update-attributes-check-add"]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"attributes.*.temp","conditions":[],"replacement":"temp.$1"}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"temp"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"temp"}}}},{"meta":[],"prototype":"operator","parameters":{"left":"actions","right":"temp","operator":"array-merge"}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"temp"}]}}],"elseTransformers":[]}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"attributes"}]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"curattributes":"&{curattributes}"},"childrenPattern":"old.attributes.*"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"old.attributes.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["commercetools-prepare-update-attributes-check-remove"]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"old.attributes.*.temp","conditions":[],"replacement":"temp.$1"}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"temp"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"temp"}}}},{"meta":[],"prototype":"operator","parameters":{"left":"actions","right":"temp","operator":"array-merge"}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"temp"}]}}],"elseTransformers":[]}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"old.attributes"}]}}]}}]}},"description":"This transformer will check all the attributes for any change and add them into actions.\n\nIt will call several transformer to achieve this. \n\nBecause the complexicity of how this work, please contact Alumio if you need any modification.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"commercetools-prepare-update-attributes-check-add","name":"CommerceTools - Prepare Update - Attributes - Check Add, label and values","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"check","value":"&{contains(oldattributes[].name, attribute.name)}","mappers":[]}]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"check"}},"conditions":[{"prototype":"equals","parameters":{"value":false}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"temp","value":[{"action":"addAttributeDefinition","attribute":"&{attribute}"}],"mappers":[]}]}}],"elseTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["commercetools-prepare-update-attributes-check-label-and-type-values"]}}]}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"check"}]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"commercetools-prepare-update-attributes-check-label-and-type-values","name":"CommerceTools - Prepare Update - Attributes - Check label and type values","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"attribute":"&{attribute}"},"childrenPattern":"oldattributes.*"}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"temp","value":[],"mappers":[]}]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"oldattributes.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"check","value":"&{name == attribute.name}","mappers":[]}]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"check"}},"conditions":[{"prototype":"equals","parameters":{"value":true}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"operator","parameters":{"left":"attribute.label","right":"label","operator":"array-diff","destination":"result"}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"result"}},"conditions":[{"prototype":"equals","parameters":{"value":[]}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"operator","parameters":{"left":"label","right":"attribute.label","operator":"array-diff","destination":"result"}}],"elseTransformers":[]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"result"}},"conditions":[{"prototype":"not-equals","parameters":{"value":[]}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"temptemp","value":[{"label":"&{attribute.label}","action":"changeLabel","attributeName":"&{name}"}],"mappers":[]}]}}],"elseTransformers":[]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"type.name"}},"conditions":[{"prototype":"equals","parameters":{"value":"lenum"}}]}}],"elseCases":[{"filter":{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"type.name"}},"conditions":[{"prototype":"equals","parameters":{"value":"set"}}]}},"transformer":{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["commercetools-prepare-update-attribute-set-lenum-check-values"]}}}],"transformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["commercetools-prepare-update-attribute-lenum-check-values"]}}],"elseTransformers":[]}}],"elseTransformers":[]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"oldattributes.*.temptemp","conditions":[],"replacement":"temptemp.$1"}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"temptemp"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"temptemp"}}}},{"meta":[],"prototype":"operator","parameters":{"left":"temp","right":"temptemp","operator":"array-merge"}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"temptemp"}]}}],"elseTransformers":[]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"temp"}},"conditions":[{"prototype":"equals","parameters":{"value":[]}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"temp"}]}}],"elseTransformers":[]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"commercetools-prepare-update-attribute-lenum-check-values","name":"CommerceTools - Prepare Update - Attribute Lenum - Check values","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"attribute.type.values","conditions":[],"replacement":"curvalues"}},{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"type.values","conditions":[],"replacement":"oldvalues"}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"temptemp","value":[],"mappers":[]}]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"attribute.type.values.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"pattern","parameters":{"keys":[]}},"destination":{"prototype":"key","parameters":{"keys":[],"root":"value"}},"stripEnclosures":true}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"oldvalues":"&{type.values}","attributename":"&{name}"},"childrenPattern":"attribute.type.values.*"}},{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"curvalue":"&{curvalues}"},"childrenPattern":"oldvalues.*"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"attribute.type.values.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["commercetools-prepare-update-attribute-lenum-check-values-add"]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"attribute.type.values.*.temptemptemp","conditions":[],"replacement":"temptemptemp.$1"}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"temptemptemp"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"temptemptemp"}}}},{"meta":[],"prototype":"operator","parameters":{"left":"temptemp","right":"temptemptemp","operator":"array-merge"}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"temptemptemp"}]}}],"elseTransformers":[]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"oldvalues.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["commercetools-prepare-update-attribute-lenum-check-values-remove"]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"oldvalues.*.keyremove","conditions":[],"replacement":"keysremove.$1"}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"keysremove"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"keysremove"}}}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"temptemptemp","value":[{"keys":"&{keysremove}","action":"removeEnumValues","attributeName":"&{name}"}],"mappers":[]}]}},{"meta":[],"prototype":"operator","parameters":{"left":"temptemp","right":"temptemptemp","operator":"array-merge"}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"temptemptemp"}]}}],"elseTransformers":[]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"temptemp"}},"conditions":[{"prototype":"equals","parameters":{"value":[]}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"temptemp"}]}}],"elseTransformers":[]}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"type"},{"key":"attribute"},{"key":"curvalues"},{"key":"oldvalues"}]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"commercetools-prepare-update-attribute-lenum-check-values-add","name":"CommerceTools - Prepare Update - Attribute Lenum - Check values add and label","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"check","value":"&{contains(oldvalues[].key, value.key)}","mappers":[]}]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"check"}},"conditions":[{"prototype":"equals","parameters":{"value":false}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"temptemptemp","value":[{"value":"&{value}","action":"addLocalizedEnumValue","attributeName":"&{attributename}"}],"mappers":[]}]}}],"elseTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["commercetools-prepare-update-attribute-lenum-check-label"]}}]}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"check"}]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"commercetools-prepare-update-attribute-lenum-check-label","name":"CommerceTools - Prepare Update - Attribute Lenum - Check label","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"value":"&{value}","attributename":"&{attributename}"},"childrenPattern":"oldvalues.*"}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"temptemptemp","value":[],"mappers":[]}]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"oldvalues.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"check","value":"&{key == value.key}","mappers":[]}]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"check"}},"conditions":[{"prototype":"equals","parameters":{"value":true}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"operator","parameters":{"left":"value.label","right":"label","operator":"array-diff","destination":"result"}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"result"}},"conditions":[{"prototype":"equals","parameters":{"value":[]}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"operator","parameters":{"left":"label","right":"value.label","operator":"array-diff","destination":"result"}}],"elseTransformers":[]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"result"}},"conditions":[{"prototype":"not-equals","parameters":{"value":[]}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"temptemptemptemp","value":[{"action":"changeLocalizedEnumValueLabel","newValue":{"key":"&{value.key}","label":"&{value.label}"},"attributeName":"&{attributename}"}],"mappers":[]}]}}],"elseTransformers":[]}}],"elseTransformers":[]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"oldvalues.*.temptemptemptemp","conditions":[],"replacement":"temptemptemptemp.$1"}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"temptemptemptemp"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"temptemptemptemp"}}}},{"meta":[],"prototype":"operator","parameters":{"left":"temptemptemp","right":"temptemptemptemp","operator":"array-merge"}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"temptemptemptemp"}]}}],"elseTransformers":[]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"temptemptemp"}},"conditions":[{"prototype":"equals","parameters":{"value":[]}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"temptemptemp"}]}}],"elseTransformers":[]}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"oldvalues"}]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"commercetools-prepare-update-attribute-lenum-check-values-remove","name":"CommerceTools - Prepare Update - Attribute Lenum - Check values remove","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"check","value":"&{contains(curvalue[].key, key)}","mappers":[]}]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"check"}},"conditions":[{"prototype":"equals","parameters":{"value":false}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"keyremove","value":["&{key}"],"mappers":[]}]}}],"elseTransformers":[]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"commercetools-prepare-update-attribute-set-lenum-check-values","name":"CommerceTools - Prepare Update - Attribute set Lenum - Check values","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"attribute.type.elementType.values","conditions":[],"replacement":"curvalues"}},{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"type.elementType.values","conditions":[],"replacement":"oldvalues"}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"temptemp","value":[],"mappers":[]}]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"attribute.type.elementType.values.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"pattern","parameters":{"keys":[]}},"destination":{"prototype":"key","parameters":{"keys":[],"root":"value"}},"stripEnclosures":true}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"oldvalues":"&{type.elementType.values}","attributename":"&{name}"},"childrenPattern":"attribute.type.elementType.values.*"}},{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"curvalue":"&{curvalues}"},"childrenPattern":"oldvalues.*"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"attribute.type.elementType.values.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["commercetools-prepare-update-attribute-set-lenum-check-values-add-and-label"]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"attribute.type.elementType.values.*.temptemptemp","conditions":[],"replacement":"temptemptemp.$1"}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"temptemptemp"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"temptemptemp"}}}},{"meta":[],"prototype":"operator","parameters":{"left":"temptemp","right":"temptemptemp","operator":"array-merge"}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"temptemptemp"}]}}],"elseTransformers":[]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"oldvalues.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["commercetools-prepare-update-attribute-set-lenum-check-values-remove"]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"oldvalues.*.keyremove","conditions":[],"replacement":"keysremove.$1"}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"keysremove"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"keysremove"}}}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"temptemptemp","value":[{"keys":"&{keysremove}","action":"removeEnumValues","attributeName":"&{name}"}],"mappers":[]}]}},{"meta":[],"prototype":"operator","parameters":{"left":"temptemp","right":"temptemptemp","operator":"array-merge"}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"temptemptemp"}]}}],"elseTransformers":[]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"temptemp"}},"conditions":[{"prototype":"equals","parameters":{"value":[]}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"temptemp"}]}}],"elseTransformers":[]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"commercetools-prepare-update-attribute-set-lenum-check-values-add-and-label","name":"CommerceTools - Prepare Update - Attribute set Lenum - Check values add and label","object":{"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"check","value":"&{contains(oldvalues[].key, value.key)}","mappers":[]}]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"check"}},"conditions":[{"prototype":"equals","parameters":{"value":false}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"temptemptemp","value":[{"value":"&{value}","action":"addLocalizedEnumValue","attributeName":"&{attributename}"}],"mappers":[]}]}}],"elseTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["commercetools-prepare-update-attribute-set-lenum-check-label"]}}]}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"check"}]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"commercetools-prepare-update-attribute-set-lenum-check-label","name":"CommerceTools - Prepare Update - Attribute set Lenum - Check label","object":{"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"value":"&{value}","attributename":"&{attributename}"},"childrenPattern":"oldvalues.*"}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"temptemptemp","value":[],"mappers":[]}]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"oldvalues.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"check","value":"&{key == value.key}","mappers":[]}]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"check"}},"conditions":[{"prototype":"equals","parameters":{"value":true}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"operator","parameters":{"left":"value.label","right":"label","operator":"array-diff","destination":"result"}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"result"}},"conditions":[{"prototype":"equals","parameters":{"value":[]}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"operator","parameters":{"left":"label","right":"value.label","operator":"array-diff","destination":"result"}}],"elseTransformers":[]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"result"}},"conditions":[{"prototype":"not-equals","parameters":{"value":[]}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"temptemptemptemp","value":[{"action":"changeLocalizedEnumValueLabel","newValue":{"key":"&{value.key}","label":"&{value.label}"},"attributeName":"&{attributename}"}],"mappers":[]}]}}],"elseTransformers":[]}}],"elseTransformers":[]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"oldvalues.*.temptemptemptemp","conditions":[],"replacement":"temptemptemptemp.$1"}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"temptemptemptemp"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"temptemptemptemp"}}}},{"meta":[],"prototype":"operator","parameters":{"left":"temptemptemp","right":"temptemptemptemp","operator":"array-merge"}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"temptemptemptemp"}]}}],"elseTransformers":[]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"temptemptemp"}},"conditions":[{"prototype":"equals","parameters":{"value":[]}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"temptemptemp"}]}}],"elseTransformers":[]}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"oldvalues"}]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"commercetools-prepare-update-attribute-set-lenum-check-values-remove","name":"CommerceTools - Prepare Update - Attribute set Lenum - Check values remove","object":{"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"check","value":"&{contains(curvalue[].key, key)}","mappers":[]}]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"check"}},"conditions":[{"prototype":"equals","parameters":{"value":false}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"keyremove","value":["&{key}"],"mappers":[]}]}}],"elseTransformers":[]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"commercetools-prepare-update-attributes-check-remove","name":"CommerceTools - Prepare Update - Attributes - Check Remove","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"check","value":"&{contains(curattributes[].name, name)}","mappers":[]}]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"check"}},"conditions":[{"prototype":"equals","parameters":{"value":false}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"temp","value":[{"name":"&{name}","action":"removeAttributeDefinition"}],"mappers":[]}]}}],"elseTransformers":[]}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"check"}]}}]}}]}},"description":"","owner":null,"disabled":false}